{"remainingRequest":"E:\\HNU IMPORTANT\\大三下课程\\数据库系统设计\\实验5\\后端\\movie\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\HNU IMPORTANT\\大三下课程\\数据库系统设计\\实验5\\后端\\movie\\src\\components\\managecate.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\HNU IMPORTANT\\大三下课程\\数据库系统设计\\实验5\\后端\\movie\\src\\components\\managecate.vue","mtime":1623813150427},{"path":"E:\\HNU IMPORTANT\\大三下课程\\数据库系统设计\\实验5\\后端\\movie\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\HNU IMPORTANT\\大三下课程\\数据库系统设计\\实验5\\后端\\movie\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"E:\\HNU IMPORTANT\\大三下课程\\数据库系统设计\\实验5\\后端\\movie\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\HNU IMPORTANT\\大三下课程\\数据库系统设计\\实验5\\后端\\movie\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQpleHBvcnQgZGVmYXVsdCB7DQogIG5hbWU6J21hbmFnZWNhdGUnLA0KICBkYXRhKCkgew0KICAgIHJldHVybiB7DQpzaXplOicnLA0KcGFnZTonJywNCiAgICAgIGxvYWRpbmc6IHRydWUsDQogICAgICAvLyAgIOihqOagvOeahOaVsOaNrg0KICAgICAgdGFibGVEYXRhOiBbDQogICAgICAgIHsNCiAgICAgICAgICBpZDonJywNCiAgICAgICAgICBuYW1lOicnLA0KICAgICAgICB9DQogICAgICBdLA0KICAgICAgZGlhbG9nRm9ybVZpc2libGU6IGZhbHNlLA0KICAgICAgZm9ybUxhYmVsV2lkdGg6ICIxODBweCIsDQogICAgICAvLyDorr7nva5mb3Jt55So5LqO6L+b6KGM5re75Yqg55qE5pe25YCZ57uR5a6a5YC8DQogICAgICBmb3JtOiB7DQogICAgICAgIGlkOiAiIiwNCiAgICAgICAgbmFtZTogIiIsDQogICAgICB9LA0KICAgICAgcnVsZXM6ew0KICAgICAgICBpZDogWw0KICAgICAgICAgIHsgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICLor7fovpPlhaUiLCB0cmlnZ2VyOiAiYmx1ciIgfSwNCiAgICAgICAgXSwNCiAgICAgICAgbmFtZTogWw0KICAgICAgICAgIHsgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICLor7fovpPlhaUiLCB0cmlnZ2VyOiAiYmx1ciIgfSwNCiAgICAgICAgXSwNCiAgICAgIH0sDQogICAgICBjdXJyZW50SW5kZXg6ICIiLA0KICAgICAgbWFyazowDQogICAgfTsNCiAgfSwNCiAgY3JlYXRlZCgpIHsNCiAgICAvLyAgIOiuvue9ruWbnuiwg+WHveaVsO+8jOi/m+ihjDEuNeenkueahGxvYWRpbmfliqjnlLvmmL7npLoNCiAgICBzZXRUaW1lb3V0KCgpID0+IHsNCiAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlOw0KICAgIH0sIDE1MDApOw0KICAgIHRoaXMuZ2V0VGFibGVEYXRhKCk7DQogIH0sDQogIHdhdGNoOnsNCiAgICAvLzIueOeJiOacrOeahGJ1ZyDku6XliY3nlKgxLnjlj5HnjrDmsqHmnIkg5YGH5aaC546w5Zyo5piv56ys5LiJ6aG177yM5Y+q5pyJ5LiA5p2h5pWw5o2u5LqG44CC5bCG5YW25Yig6Zmk77yM5bCx5rKh5pyJ56ys5LiJ6aG15LqG44CC5bqU6K+l6Lez5Yiw56ys5LqM6aG15bGV56S65Ye6NeadoeaVsOaNruOAgg0KICAgIC8v5Y+v5piv5pWw5o2u5rKh5pyJ5bGV56S644CC5Y6f5Zug5piv6I635Y+WbGlzdOeahOaXtuWAmXBhZ2Xlj4LmlbDmsqHmnInmlLnlj5jjgILkvp3nhLbmmK8zDQogIH0sDQogIG1ldGhvZHM6IHsNCiAgICBnZXRUYWJsZURhdGEoKXsNCiAgICAgICBjb25zdCBfdGhpcyA9IHRoaXM7DQogICAgICBheGlvcy5nZXQoImh0dHA6Ly9sb2NhbGhvc3Q6ODE4MS9nZXRjYXRlIikudGhlbihmdW5jdGlvbiAocmVzcCkgew0KICAgICAgICBjb25zb2xlLmxvZyhyZXNwLmRhdGEpOw0KICAgICAgICBfdGhpcy4kZGF0YS50YWJsZURhdGEgPSByZXNwLmRhdGE7DQogICAgICAgIGNvbnNvbGUubG9nKF90aGlzLiRkYXRhLnRhYmxlRGF0YSk7DQoNCiAgICAgIH0pOw0KICAgIH0sDQogICAgLy8g5aKe5Yqg5pWw5o2u55qE5pa55byP77yM5Y2V54us55qE6K6+572u5LiA5Lqb5YC877yM55So5LqO5aKe5Yqg5Yqf6IO977yM6L+Z5Lqb5YC85pS+5Zyo5a+56LGh6YeM6Z2i6L+b6KGM6K6+572u77yM54S25ZCO5bCG6L+Z5Liq5paw5aKe55qE5a+56LGh5aGe5Yiw5oC75pWw5o2u6YeM6Z2iDQogICAgYWRkKCkgew0KICAgICAgdGhpcy5mb3JtID0gew0KICAgICAgICBpZDogIiIsDQogICAgICAgIG5hbWU6ICIiLA0KICAgICAgfTsNCiAgICAgIHRoaXMubWFyaz0yOw0KICAgICAgLy8gICDorr7nva7ngrnlh7vmjInpkq7kuYvlkI7ov5vooYzmmL7npLrlr7nor53moYYNCiAgICAgIHRoaXMuZGlhbG9nRm9ybVZpc2libGUgPSB0cnVlOw0KICAgIH0sDQogICAgdXBkYXRlKGZvcm1OYW1lKSB7DQogICAgICBjb25zdCBfdGhpcz10aGlzOw0KICAgICAgaWYgKF90aGlzLm1hcmsgPiAxKSBfdGhpcy5tYXJrID0gMDsNCiAgICAgIF90aGlzLiRyZWZzW2Zvcm1OYW1lXS52YWxpZGF0ZSgodmFsaWQpID0+IHsNCiAgICAgICAgaWYgKHZhbGlkKSB7DQogICAgICAgICAgYXhpb3MNCiAgICAgICAgICAgIC5wb3N0KCJodHRwOi8vbG9jYWxob3N0OjgxODEvdXBkYXRlY2F0ZSIsIF90aGlzLmZvcm0pDQogICAgICAgICAgICAudGhlbigocmVzcCkgPT4gew0KICAgICAgICAgICAgICBsZXQgZGF0YSA9IHJlc3AuZGF0YS5kYXRhOw0KICAgICAgICAgICAgICBfdGhpcy50YWJsZURhdGEucHVzaChfdGhpcy5mb3JtKTsNCiAgICAgICAgICAgICAgX3RoaXMuZGlhbG9nRm9ybVZpc2libGUgPSBmYWxzZTsNCiAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24ucmVsb2FkKCk7DQogICAgICAgICAgICB9KTsNCiAgICAgICAgfXMNCiAgICAgIH0pOw0KICAgICAgfSwNCiAgICBoYW5kbGVFZGl0KGluZGV4LCByb3cpIHsNCiAgICAgIGlmKHRoaXMubWFyaz4xKSB0aGlzLm1hcms9MDsNCiAgICAgIC8vIOWwhuaVsOaNrueahGluZGV45Lyg6YCS6L+H5p2l55So5LqO5a6e546w5pWw5o2u55qE5Zue5pi+DQogICAgICB0aGlzLmZvcm0gPSB0aGlzLnRhYmxlRGF0YVtpbmRleCsodGhpcy5wYWdlLTEpKnRoaXMuc2l6ZV07DQogICAgICAvLyDorr7nva7lr7nor53moYbnmoTlj6/op4ENCiAgICAgIHRoaXMuZGlhbG9nRm9ybVZpc2libGUgPSB0cnVlOw0KICAgIH0sDQogICAgaGFuZGxlRGVsZXRlKGluZGV4LCByb3cpIHsNCiAgICAgIC8vIOiuvue9ruexu+S8vOS6jmNvbnNvbGXnsbvlnovnmoTlip/og70NCiAgICAgIHRoaXMuJGNvbmZpcm0oIuawuOS5heWIoOmZpCwg5piv5ZCm57un57utPyIsICLmj5DnpLoiLCB7DQogICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAi56Gu5a6aIiwNCiAgICAgICAgY2FuY2VsQnV0dG9uVGV4dDogIuWPlua2iCIsDQogICAgICAgIHR5cGU6ICJ3YXJuaW5nIiwNCiAgICAgIH0pDQogICAgICAgIC50aGVuKCgpID0+IHsNCiAgICAgICAgICBjb25zdCBfdGhpcz10aGlzOw0KICAgICAgICAgIGF4aW9zDQogICAgICAgICAgICAucG9zdCgiaHR0cDovL2xvY2FsaG9zdDo4MTgxL2RlbGV0ZWNhdGUiLCByb3cpDQogICAgICAgICAgICAudGhlbigocmVzcCkgPT4gew0KICAgICAgICAgICAgICBfdGhpcy5kaWFsb2dGb3JtVmlzaWJsZSA9IGZhbHNlOw0KICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24ucmVsb2FkKCk7DQogICAgICAgICAgICB9KTsNCiAgICAgICAgfSkNCiAgICAgICAgLmNhdGNoKCgpID0+IHsNCiAgICAgICAgICB0aGlzLiRtZXNzYWdlKHsNCiAgICAgICAgICAgIHR5cGU6ICJpbmZvIiwNCiAgICAgICAgICAgIG1lc3NhZ2U6ICLlt7Llj5bmtojliKDpmaQiLA0KICAgICAgICAgIH0pOw0KICAgICAgICB9KTsNCiAgICB9LA0KICAgIGNhbmNlbCgpIHsNCiAgICAgIGlmKHRoaXMubWFyaz4xKSB0aGlzLm1hcms9MDsNCiAgICAgIC8vIOWPlua2iOeahOaXtuWAmeebtOaOpeiuvue9ruWvueivneahhuS4jeWPr+ingeWNs+WPrw0KICAgICAgdGhpcy5kaWFsb2dGb3JtVmlzaWJsZSA9IGZhbHNlOw0KICAgIH0sDQogICAgaGFuZGxlU2l6ZUNoYW5nZSh2YWwpew0KICAgICAgdGhpcy5zaXplID0gdmFsOw0KICAgIH0sDQogICAgaGFuZGxlQ3VycmVudENoYW5nZSh2YWwpIHsNCiAgICAgIHRoaXMucGFnZSA9IHZhbDsNCiAgICB9DQogIH0NCn07DQo="},{"version":3,"sources":["managecate.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"managecate.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n  <div>\r\n    <div>\r\n      <el-menu\r\n        :default-active=\"this.$route.path\"\r\n        class=\"el-menu-demo\"\r\n        mode=\"horizontal\"\r\n        background-color=\"#545c64\"\r\n        text-color=\"#fff\"\r\n        active-text-color=\"#ffd04b\"\r\n      >\r\n        <el-menu-item index=\"1\">类别列表</el-menu-item>\r\n      </el-menu>\r\n      <br />\r\n      <!-- 点击触发add方法 -->\r\n      <el-button type=\"primary\" @click=\"add\">新增</el-button>\r\n      <el-table :data=\"tableData\" style=\"text-align: center; width: 100%\">\r\n        <!--        <el-table-column prop=\"id\" label=\"序号\" width=\"180\"></el-table-columntype=\"index\">-->\r\n        <el-table-column\r\n          prop=\"id\"\r\n          label=\"类别编号\"\r\n          width=\"150\"\r\n        ></el-table-column>\r\n        <el-table-column\r\n          prop=\"name\"\r\n          label=\"类别名称\"\r\n          width=\"150\"\r\n        ></el-table-column>\r\n        <el-table-column label=\"操作\" width=\"180\">\r\n          <template slot-scope=\"scope\">\r\n            <!-- 点击编辑进入编辑页面进行编辑表格数据 -->\r\n            <el-button\r\n              size=\"small\"\r\n              type=\"danger\"\r\n              @click=\"handleDelete(scope.$index, scope.row)\"\r\n              >删除</el-button\r\n            >\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n    </div>\r\n\r\n    <!-- 下面这个用来设置点击添加按钮的弹出框，里面可以进行嵌套表格来展示弹出的表格信息,使用下面的:visible.sync来控制显示与否 -->\r\n    <!-- 里面绑定的是我们新设置的值，填写完成后，将我们这个新值塞到页面中所有的数据当中去 -->\r\n    <el-dialog title=\"类别信息\" :visible.sync=\"dialogFormVisible\">\r\n      <!-- 在el-dialog中进行嵌套el-form实现弹出表格的效果 -->\r\n      <el-form :model=\"form\" :rules=\"rules\" ref=\"form\">\r\n        <el-form-item\r\n          label=\"类别编号(不允许重复)\"\r\n          prop=\"id\"\r\n          :label-width=\"formLabelWidth\"\r\n        >\r\n          <el-input\r\n            v-if=\"mark > 1\"\r\n            v-model=\"form.id\"\r\n            auto-complete=\"off\"\r\n          ></el-input>\r\n          <el-input\r\n            v-else\r\n            v-model=\"form.id\"\r\n            auto-complete=\"off\"\r\n            disabled\r\n          ></el-input>\r\n        </el-form-item>\r\n        <el-form-item\r\n          label=\"类别名称\"\r\n          prop=\"name\"\r\n          :label-width=\"formLabelWidth\"\r\n        >\r\n          <el-input v-model=\"form.name\" auto-complete=\"off\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item style=\"text-align: right\">\r\n          <el-button @click=\"cancel\">取 消</el-button>\r\n          <!-- 设置触发更新的方法 -->\r\n          <el-button type=\"primary\" @click=\"update('form')\">确 定</el-button>\r\n        </el-form-item>\r\n      </el-form>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script type=\"text/ecmascript-6\">\r\nexport default {\r\n  name:'managecate',\r\n  data() {\r\n    return {\r\nsize:'',\r\npage:'',\r\n      loading: true,\r\n      //   表格的数据\r\n      tableData: [\r\n        {\r\n          id:'',\r\n          name:'',\r\n        }\r\n      ],\r\n      dialogFormVisible: false,\r\n      formLabelWidth: \"180px\",\r\n      // 设置form用于进行添加的时候绑定值\r\n      form: {\r\n        id: \"\",\r\n        name: \"\",\r\n      },\r\n      rules:{\r\n        id: [\r\n          { required: true, message: \"请输入\", trigger: \"blur\" },\r\n        ],\r\n        name: [\r\n          { required: true, message: \"请输入\", trigger: \"blur\" },\r\n        ],\r\n      },\r\n      currentIndex: \"\",\r\n      mark:0\r\n    };\r\n  },\r\n  created() {\r\n    //   设置回调函数，进行1.5秒的loading动画显示\r\n    setTimeout(() => {\r\n      this.loading = false;\r\n    }, 1500);\r\n    this.getTableData();\r\n  },\r\n  watch:{\r\n    //2.x版本的bug 以前用1.x发现没有 假如现在是第三页，只有一条数据了。将其删除，就没有第三页了。应该跳到第二页展示出5条数据。\r\n    //可是数据没有展示。原因是获取list的时候page参数没有改变。依然是3\r\n  },\r\n  methods: {\r\n    getTableData(){\r\n       const _this = this;\r\n      axios.get(\"http://localhost:8181/getcate\").then(function (resp) {\r\n        console.log(resp.data);\r\n        _this.$data.tableData = resp.data;\r\n        console.log(_this.$data.tableData);\r\n\r\n      });\r\n    },\r\n    // 增加数据的方式，单独的设置一些值，用于增加功能，这些值放在对象里面进行设置，然后将这个新增的对象塞到总数据里面\r\n    add() {\r\n      this.form = {\r\n        id: \"\",\r\n        name: \"\",\r\n      };\r\n      this.mark=2;\r\n      //   设置点击按钮之后进行显示对话框\r\n      this.dialogFormVisible = true;\r\n    },\r\n    update(formName) {\r\n      const _this=this;\r\n      if (_this.mark > 1) _this.mark = 0;\r\n      _this.$refs[formName].validate((valid) => {\r\n        if (valid) {\r\n          axios\r\n            .post(\"http://localhost:8181/updatecate\", _this.form)\r\n            .then((resp) => {\r\n              let data = resp.data.data;\r\n              _this.tableData.push(_this.form);\r\n              _this.dialogFormVisible = false;\r\n                window.location.reload();\r\n            });\r\n        }s\r\n      });\r\n      },\r\n    handleEdit(index, row) {\r\n      if(this.mark>1) this.mark=0;\r\n      // 将数据的index传递过来用于实现数据的回显\r\n      this.form = this.tableData[index+(this.page-1)*this.size];\r\n      // 设置对话框的可见\r\n      this.dialogFormVisible = true;\r\n    },\r\n    handleDelete(index, row) {\r\n      // 设置类似于console类型的功能\r\n      this.$confirm(\"永久删除, 是否继续?\", \"提示\", {\r\n        confirmButtonText: \"确定\",\r\n        cancelButtonText: \"取消\",\r\n        type: \"warning\",\r\n      })\r\n        .then(() => {\r\n          const _this=this;\r\n          axios\r\n            .post(\"http://localhost:8181/deletecate\", row)\r\n            .then((resp) => {\r\n              _this.dialogFormVisible = false;\r\n              window.location.reload();\r\n            });\r\n        })\r\n        .catch(() => {\r\n          this.$message({\r\n            type: \"info\",\r\n            message: \"已取消删除\",\r\n          });\r\n        });\r\n    },\r\n    cancel() {\r\n      if(this.mark>1) this.mark=0;\r\n      // 取消的时候直接设置对话框不可见即可\r\n      this.dialogFormVisible = false;\r\n    },\r\n    handleSizeChange(val){\r\n      this.size = val;\r\n    },\r\n    handleCurrentChange(val) {\r\n      this.page = val;\r\n    }\r\n  }\r\n};\r\n</script>\r\n<style >\r\n</style>\r\n\r\n"]}]}